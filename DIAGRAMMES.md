# ğŸ” DIAGRAMMES D'AUTHENTIFICATION

## 1. Architecture Globale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     UTILISATEUR                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ (Navigateur)
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FRONTEND (HTML/JS)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ connexion.html         â†’ Formulaire login                â”‚
â”‚ â€¢ inscription.html       â†’ Formulaire register             â”‚
â”‚ â€¢ dashbord.html          â†’ Page protÃ©gÃ©e                   â”‚
â”‚                                                              â”‚
â”‚ SCRIPTS (Ordre correct):                                   â”‚
â”‚ 1. utils.js              â†’ Fonctions utilitaires           â”‚
â”‚ 2. api-client.js         â†’ Classe APIClient               â”‚
â”‚ 3. auth-api.js           â†’ Authentification               â”‚
â”‚ 4. main.js               â†’ Gestionnaires d'Ã©vÃ©nements    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
              (HTTP/REST avec credentials)
                           â”‚
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (PHP)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bootstrap.php            â†’ Configuration centralisÃ©e       â”‚
â”‚ configs/cors.php         â†’ Headers CORS                    â”‚
â”‚ configs/database.php     â†’ ParamÃ¨tres BD                   â”‚
â”‚ Api/Auth/*.php           â†’ Endpoints authentification     â”‚
â”‚ models/Database.php      â†’ Classe de connexion            â”‚
â”‚ utils/Security.php       â†’ Hachage + Validation          â”‚
â”‚ utils/Response.php       â†’ RÃ©ponses JSON                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                        (SQL)
                           â”‚
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  BASE DE DONNÃ‰ES (MySQL)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ app_ib                                                       â”‚
â”‚ â””â”€â”€ utilisateurs (table)                                    â”‚
â”‚     â”œâ”€â”€ id, nom, prenom, telephone, email                 â”‚
â”‚     â”œâ”€â”€ mot_de_passe (BCRYPT), role, photo               â”‚
â”‚     â”œâ”€â”€ created_at, derniere_connexion                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Flux Inscription

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UTILISATEUR REMPLIT FORMULAIRE D'INSCRIPTION              â”‚
â”‚ (nom, prÃ©nom, tÃ©lÃ©phone, email, mot de passe)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDATION FRONTEND         â”‚
        â”‚ âœ“ Champs non vides         â”‚
        â”‚ âœ“ Email valide             â”‚
        â”‚ âœ“ TÃ©lÃ©phone 10 chiffres    â”‚
        â”‚ âœ“ Mots de passe concordent â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ seConnecter(nom, prenom, tel, email, pwd, confirm)     â”‚
â”‚ â†“                                                         â”‚
â”‚ api.register(...)                                         â”‚
â”‚ â†“                                                         â”‚
â”‚ POST /Api/Auth/register.php                              â”‚
â”‚ {                                                         â”‚
â”‚   "nom": "Dupont",                                       â”‚
â”‚   "prenom": "Jean",                                      â”‚
â”‚   "telephone": "0123456789",                             â”‚
â”‚   "email": "jean@example.com",                           â”‚
â”‚   "mot_de_passe": "Test1234",                            â”‚
â”‚   "confirm_mot_de_passe": "Test1234"                     â”‚
â”‚ }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDATION BACKEND          â”‚
        â”‚ âœ“ Champs valides           â”‚
        â”‚ âœ“ DonnÃ©es sÃ©curisÃ©es       â”‚
        â”‚ âœ“ Utilisateur unique       â”‚
        â”‚ âœ“ Password fort            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ CRÃ‰ER UTILISATEUR           â”‚
        â”‚ 1. Hash password (BCRYPT)   â”‚
        â”‚ 2. Insert BD                â”‚
        â”‚ 3. CrÃ©er session PHP        â”‚
        â”‚    $_SESSION['user_id'] = 5 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ RETOURNER RÃ‰PONSE           â”‚
        â”‚ {                           â”‚
        â”‚   "success": true,          â”‚
        â”‚   "data": {                 â”‚
        â”‚     "id": 5,                â”‚
        â”‚     "nom": "Dupont",        â”‚
        â”‚     "prenom": "Jean",       â”‚
        â”‚     "telephone": "..."      â”‚
        â”‚   }                         â”‚
        â”‚ }                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FRONTEND TRAITE RÃ‰PONSE     â”‚
        â”‚ 1. Notification succÃ¨s      â”‚
        â”‚ 2. LocalStorage optionnel   â”‚
        â”‚ 3. Redirection              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ğŸ‰ UTILISATEUR CONNECTÃ‰    â”‚
        â”‚ â†’ Dashboard affichage       â”‚
        â”‚ â†’ Session active            â”‚
        â”‚ â†’ Cookies configurÃ©s        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Flux Connexion

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UTILISATEUR REMPLIT FORMULAIRE DE CONNEXION              â”‚
â”‚ (tÃ©lÃ©phone, mot de passe)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ VALIDATION FRONTEND         â”‚
        â”‚ âœ“ Champs non vides         â”‚
        â”‚ âœ“ TÃ©lÃ©phone valide         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ seConnecter(telephone, motDePasse)                       â”‚
â”‚ â†“                                                         â”‚
â”‚ api.login(...)                                            â”‚
â”‚ â†“                                                         â”‚
â”‚ POST /Api/Auth/login.php                                â”‚
â”‚ {                                                         â”‚
â”‚   "telephone": "0123456789",                             â”‚
â”‚   "mot_de_passe": "Test1234"                             â”‚
â”‚ }                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ BACKEND RECHERCHE USER      â”‚
        â”‚ SELECT * FROM utilisateurs  â”‚
        â”‚ WHERE telephone = :tel      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PASSWORD_VERIFY(input, hash BD)         â”‚
        â”‚ â†“                                       â”‚
        â”‚ âœ… SI OK â†’ CrÃ©er session               â”‚
        â”‚    $_SESSION['user_id'] = id           â”‚
        â”‚ âŒ SI NOK â†’ Erreur                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ RETOURNER RÃ‰PONSE           â”‚
        â”‚ {                           â”‚
        â”‚   "success": true,          â”‚
        â”‚   "data": {user_data}       â”‚
        â”‚   "message": "SuccÃ¨s"       â”‚
        â”‚ }                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ğŸ‰ AUTHENTIFICATION RÃ‰USSIEâ”‚
        â”‚ â†’ Dashboard accessible      â”‚
        â”‚ â†’ Cookie PHPSESSID reÃ§u    â”‚
        â”‚ â†’ Session active            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Flux VÃ©rification Session

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UTILISATEUR ACCÃˆDE AU DASHBOARD                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ verifierAuthentification()   â”‚
        â”‚ check: on est sur dashboard â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ estAuthentifie()?            â”‚
        â”‚ return utilisateurConnecte   â”‚
        â”‚ !== null ?                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
      âœ… OUI                           âŒ NON
        â”‚                               â”‚
        â†“                               â†“
   Dashboard          Redirection
   Affichage          vers connexion.html
   Contenu            (Ligne 403-410)
   Utilisateur
```

---

## 5. Architecture SÃ©curitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SÃ‰CURITÃ‰ COUCHES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ COUCHE 1: VALIDATION                                   â”‚
â”‚ â”œâ”€ Frontend: Regex, types, longueurs                  â”‚
â”‚ â””â”€ Backend: Stricte, tous les champs                 â”‚
â”‚                                                          â”‚
â”‚ COUCHE 2: SANITIZATION                                â”‚
â”‚ â”œâ”€ htmlspecialchars() pour XSS                        â”‚
â”‚ â””â”€ ParamÃ¨tres liÃ©s PDO pour SQL injection             â”‚
â”‚                                                          â”‚
â”‚ COUCHE 3: AUTHENTIFICATION                            â”‚
â”‚ â”œâ”€ BCRYPT hash (cost 12)                             â”‚
â”‚ â”œâ”€ password_verify() comparaison                      â”‚
â”‚ â””â”€ Pas stockage plain text                           â”‚
â”‚                                                          â”‚
â”‚ COUCHE 4: SESSIONS                                    â”‚
â”‚ â”œâ”€ PHP Sessions sÃ©curisÃ©es                           â”‚
â”‚ â”œâ”€ Cookies httpOnly recommandÃ©                       â”‚
â”‚ â””â”€ Session timeout                                    â”‚
â”‚                                                          â”‚
â”‚ COUCHE 5: CORS                                        â”‚
â”‚ â”œâ”€ Headers Access-Control-Allow-*                    â”‚
â”‚ â”œâ”€ Whitelist origines                                â”‚
â”‚ â””â”€ Support credentials: true                         â”‚
â”‚                                                          â”‚
â”‚ COUCHE 6: LOGGING                                     â”‚
â”‚ â”œâ”€ Ã‰vÃ©nements d'authentification                     â”‚
â”‚ â”œâ”€ Tentatives Ã©chouÃ©es                              â”‚
â”‚ â””â”€ Piste d'audit                                     â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Flux RequÃªte avec Sessions

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAVIGATEUR (Client)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ POST /Api/Auth/login.php
         â”‚ + credentials: 'include'
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND REÃ‡OIT REQUÃŠTE          â”‚
â”‚                                 â”‚
â”‚ 1. VÃ©rifie identifiants         â”‚
â”‚ 2. session_start()              â”‚
â”‚ 3. $_SESSION['user_id'] = 5     â”‚
â”‚ 4. Retourne rÃ©ponse             â”‚
â”‚                                 â”‚
â”‚ Response Headers:               â”‚
â”‚ Set-Cookie: PHPSESSID=...      â”‚
â”‚ Access-Control-Allow-Origin: *  â”‚
â”‚ Content-Type: application/json  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RÃ©ponse JSON
         â”‚ + Cookie PHPSESSID
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NAVIGATEUR             â”‚
â”‚ Store cookie           â”‚
â”‚ PHPSESSID=abc123       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RequÃªte suivante
         â”‚ (AUTO) Inclut cookie:
         â”‚ Cookie: PHPSESSID=abc123
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND REÃ‡OIT REQUÃŠTE          â”‚
â”‚                                 â”‚
â”‚ 1. session_start()              â”‚
â”‚ 2. RÃ©cupÃ¨re $_SESSION['user_id']â”‚
â”‚ 3. Valide utilisateur           â”‚
â”‚ 4. Retourne donnÃ©es             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ RÃ©ponse avec donnÃ©es
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FRONTEND               â”‚
â”‚ Affiche donnÃ©es        â”‚
â”‚ Utilisateur connectÃ©   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Ordre Scripts JavaScript

```
CORRECT âœ…
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. utils.js
   â”œâ”€ validerEmail()
   â”œâ”€ validerTelephone()
   â”œâ”€ afficherNotification()
   â””â”€ ... autres utilitÃ©s

2. api-client.js
   â”œâ”€ class APIClient { ... }
   â””â”€ const api = new APIClient()  â† Instance GLOBALE

3. auth-api.js
   â”œâ”€ seConnecter() utilise â†’ api.login()
   â”œâ”€ sInscrire() utilise â†’ api.register()
   â””â”€ estAuthentifie()

4. main.js
   â”œâ”€ formConnexion.addEventListener('submit', ...)
   â”‚  â””â”€ Appelle seConnecter()
   â”œâ”€ formInscription.addEventListener('submit', ...)
   â”‚  â””â”€ Appelle sInscrire()
   â””â”€ verifierAuthentification()


INCORRECT âŒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ main.js avant api-client.js
   â†’ Error: api is not defined

âŒ auth-api.js avant api-client.js
   â†’ Error: api.login() fails

âŒ Ne pas charger les scripts du tout
   â†’ Aucune authentification
```

---

## 8. Ã‰tat du SystÃ¨me

```
AVANT (IncohÃ©rent âŒ):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend: localStorage + donnÃ©es fictives
Backend:  API crÃ©Ã©e mais inutilisÃ©e
Config:   Fichiers vides
Tests:    Aucun
Docs:     Minimale

    â˜…â˜…â˜†â˜†â˜† (2/5)


APRÃˆS (CohÃ©rent âœ…):
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Frontend: API REST intÃ©grÃ©e
Backend:  API complÃ¨te et sÃ©curisÃ©e
Config:   CentralisÃ©e bootstrap.php
Tests:    2 suites complÃ¨tes
Docs:     8 guides + 40 pages

    â˜…â˜…â˜…â˜…â˜… (5/5)
```

---

Ce document rÃ©capitule les diagrammes visuels du systÃ¨me d'authentification APP_IB.

Pour plus d'informations: Consultez les guides documentation.
